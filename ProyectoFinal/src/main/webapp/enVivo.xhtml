<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
	<h:head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Registro de la emisora</title>
		<link rel ="stylesheet" href="../css/vivo.css"/>
		<link rel="icon" type="imagen/png" href="../imagenes/icono.png"/>
	</h:head>
	<h:body>
		<div class="glitch-wrapper">
   		<div class="glitch" data-glitch="ForrestM">ForrestM</div>
   		</div>
   		
   		
		<form class="screen">
		  <input type="checkbox" value="None" id="magicButton" name="check" />
		  <label class="main" for="magicButton"></label>
		
		  <div class="coverImage"></div>
		  <div class="search"></div>
		  <div class="bodyPlayer"></div>
		
		  <p:outputPanel id="tablaCanciones">
		  <table class="list">
		  	<ui:repeat value="#{playListBean.listaSeleccionada.canciones}"
                var="cancion" varStatus="loop">
		    <tr class="song">
		      <td class="nr">
		        <h5>#{loop.index + 1}</h5></td>
		      <td class="title"><h6>#{cancion.nombre_cancion}</h6></td>
		      <td class="length"><h5>3:54</h5></td>
		      <td>
                  <audio id="audio_#{loop.index}" controls="controls" onended="reproducirSiguienteCancion('#{loop.index + 1}')">
                      <source src="#{request.contextPath}/recursos/canciones/#{cancion.nombre_cancion}.mp3" type="audio/mpeg" />
                      Your browser does not support the audio element.
                  </audio>
              </td>
		      <td><input type="checkbox" id="heart"/><label class="zmr" for="heart"></label></td>
		    </tr>
		    </ui:repeat>
		  </table>
		  </p:outputPanel>
		
		  <div class="shadow"></div>
		
		  <div class="bar"></div>
		
		  <div class="info">
		    <h4>#{cancion.nombre_cancion}</h4>
		    <h3>#{cancion.nombre_artista}</h3>
		  </div>
		
		  <table class="player">
			<tr>
			    <td>
			    	<h:selectOneMenu
						value="#{cancionBean.playListSeleccionada}"
						onchange="actualizarCanciones()">
						<f:selectItem itemLabel="Selecciona una playlist..." itemValue="" />
						<f:selectItems value="#{playListBean.mostrarPlayLists()}"
							var="playlist" itemValue="#{playlist}"
							itemLabel="#{playlist.nombre}" />
						<f:ajax execute="@this" render="tablaCanciones" />
					</h:selectOneMenu>
				</td>
			</tr>
			<tr>
			    <td><h:commandButton action="#{cancionBean.volver}" class="play" value="Volver"></h:commandButton></td>
			</tr>
			<tr>
				<audio controls="controls" type="audio/mpeg" src="#{request.contextPath}/canciones/Amorfoda.mp3" />
			</tr>
		  </table>
		  
		  <div class="current"><h2>#{cancion.nombre_cancion}</h2></div>
		</form>
    </h:body>
</html>